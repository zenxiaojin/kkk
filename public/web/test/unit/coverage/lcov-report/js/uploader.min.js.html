<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for js/uploader.min.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">All files</a> / <a href="index.html">js</a> uploader.min.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/61</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/70</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/35</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/1</span>
      </div>
    </div>
    <p class="quiet">
      Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
    </p>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" >!<span class="fstat-no" title="function not covered" >function(</span>a,b){<span class="cstat-no" title="statement not covered" >"function"==typeof define&amp;&amp;define.amd?define("simple-uploader",["jquery","simple-module"],<span class="fstat-no" title="function not covered" >function(</span>c,d){<span class="cstat-no" title="statement not covered" >return a.uploader=b(c,d)})</span>:"object"==typeof exports?module.exports=b(require("jquery"),require("simplemodule")):(a.simple=a.simple||{},a.simple.uploader=b(jQuery,SimpleModule))}(</span>this,<span class="fstat-no" title="function not covered" >function(</span>a,b){var c,d,<span class="fstat-no" title="function not covered" >e=<span class="cstat-no" title="statement not covered" >f</span>unction(a,b){function <span class="fstat-no" title="function not covered" >c(){<span class="cstat-no" title="statement not covered" >this.constructor=a}<span class="cstat-no" title="statement not covered" >f</span>or(var d in b)<span class="cstat-no" title="statement not covered" >f.call(b,d)&amp;&amp;(a[d]=b[d]);<span class="cstat-no" title="statement not covered" >r</span>eturn c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},</span>f=<span class="cstat-no" title="statement not covered" >{}.hasOwnProperty;<span class="cstat-no" title="statement not covered" >return c=<span class="fstat-no" title="function not covered" >function(</span>b){function <span class="fstat-no" title="function not covered" >c(){<span class="cstat-no" title="statement not covered" >return c.__super__.constructor.apply(this,arguments)}<span class="cstat-no" title="statement not covered" >r</span>eturn e(c,b),c.count=0,c.prototype.opts={url:"",params:null,fileKey:"upload_file",connectionCount:3},c.prototype._init=<span class="fstat-no" title="function not covered" >function()</span>{<span class="cstat-no" title="statement not covered" >return this.files=[],this.queue=[],this.id=++c.count,this.on("uploadcomplete",<span class="fstat-no" title="function not covered" >function(</span>b){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(</span>c,d){<span class="cstat-no" title="statement not covered" >return b.files.splice(a.inArray(d,b.files),1),b.queue.length&gt;0&amp;&amp;b.files.length&lt;b.opts.connectionCount?b.upload(b.queue.shift()):b.uploading=!1}}</span>(</span>this)),a(window).on("beforeunload.uploader-"+this.id,<span class="fstat-no" title="function not covered" >function(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(</span>b){<span class="cstat-no" title="statement not covered" >return a.uploading?(b.originalEvent.returnValue=a._t("leaveConfirm"),a._t("leaveConfirm")):void 0}}</span>(</span>this))},</span>c.prototype.generateId=<span class="fstat-no" title="function not covered" >function()</span>{var a;<span class="cstat-no" title="statement not covered" >return a=0,<span class="fstat-no" title="function not covered" >function()</span>{<span class="cstat-no" title="statement not covered" >return a+=1}}</span>(</span>),c.prototype.upload=<span class="fstat-no" title="function not covered" >function(</span>b,c){var d,e,f,g;<span class="cstat-no" title="statement not covered" >if(null==c&amp;&amp;(c={}),null!=b){<span class="cstat-no" title="statement not covered" >if(a.isArray(b)||b instanceof FileList)<span class="cstat-no" title="statement not covered" >for(e=0,g=b.length;g&gt;e;e++)<span class="cstat-no" title="statement not covered" >d=b[e],this.upload(d,c);else <span class="cstat-no" title="statement not covered" >a(b).is("input:file")?(f=a(b).attr("name"),f&amp;&amp;(c.fileKey=f),this.upload(a.makeArray(a(b)[0].files),c)):b.id&amp;&amp;b.obj||(b=this.getFile(b));<span class="cstat-no" title="statement not covered" >i</span></span>f(b&amp;&amp;b.obj){<span class="cstat-no" title="statement not covered" >if(a.extend(b,c),this.files.length&gt;=this.opts.connectionCount)<span class="cstat-no" title="statement not covered" >return void this.queue.push(b);<span class="cstat-no" title="statement not covered" >i</span></span>f(this.triggerHandler("beforeupload",[b])!==!1)<span class="cstat-no" title="statement not covered" >return this.files.push(b),this._xhrUpload(b),this.uploading=!0}}</span></span>}</span>,</span>c.prototype.getFile=<span class="fstat-no" title="function not covered" >function(</span>a){var b,c,d;<span class="cstat-no" title="statement not covered" >return a instanceof window.File||a instanceof window.Blob?(b=null!=(c=a.fileName)?c:a.name,{id:this.generateId(),url:this.opts.url,params:this.opts.params,fileKey:this.opts.fileKey,name:b,size:null!=(d=a.fileSize)?d:a.size,ext:b?b.split(".").pop().toLowerCase():"",obj:a}):null},</span>c.prototype._xhrUpload=<span class="fstat-no" title="function not covered" >function(</span>b){var c,d,e,f;<span class="cstat-no" title="statement not covered" >if(c=new FormData,c.append(b.fileKey,b.obj),c.append("original_filename",b.name),b.params){<span class="cstat-no" title="statement not covered" >e=b.params;<span class="cstat-no" title="statement not covered" >f</span>or(d in e)<span class="cstat-no" title="statement not covered" >f=e[d],c.append(d,f)}<span class="cstat-no" title="statement not covered" >r</span></span>eturn b.xhr=a.ajax({url:b.url,data:c,processData:!1,contentType:!1,type:"POST",headers:{"X-File-Name":encodeURIComponent(b.name)},xhr:<span class="fstat-no" title="function not covered" >function()</span>{var b;<span class="cstat-no" title="statement not covered" >return b=a.ajaxSettings.xhr(),b&amp;&amp;(b.upload.onprogress=<span class="fstat-no" title="function not covered" >function(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(</span>b){<span class="cstat-no" title="statement not covered" >return a.progress(b)}}</span>(</span>this)),b},</span>progress:<span class="fstat-no" title="function not covered" >function(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(</span>c){<span class="cstat-no" title="statement not covered" >return c.lengthComputable?a.trigger("uploadprogress",[b,c.loaded,c.total]):void 0}}</span>(</span>this),error:<span class="fstat-no" title="function not covered" >function(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(</span>c,d,e){<span class="cstat-no" title="statement not covered" >return a.trigger("uploaderror",[b,c,d])}}</span>(</span>this),success:<span class="fstat-no" title="function not covered" >function(</span>c){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(</span>d){<span class="cstat-no" title="statement not covered" >return c.trigger("uploadprogress",[b,b.size,b.size]),c.trigger("uploadsuccess",[b,d]),a(document).trigger("uploadsuccess",[b,d,c])}}</span>(</span>this),complete:<span class="fstat-no" title="function not covered" >function(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(</span>c,d){<span class="cstat-no" title="statement not covered" >return a.trigger("uploadcomplete",[b,c.responseText])}}</span>(</span>this)})},</span>c.prototype.cancel=<span class="fstat-no" title="function not covered" >function(</span>a){var b,c,d,e;<span class="cstat-no" title="statement not covered" >if(!a.id)<span class="cstat-no" title="statement not covered" >for(e=this.files,c=0,d=e.length;d&gt;c;c++)<span class="cstat-no" title="statement not covered" >if(b=e[c],b.id===1*a){<span class="cstat-no" title="statement not covered" >a=b;<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn this.trigger("uploadcancel",[a]),a.xhr&amp;&amp;a.xhr.abort(),a.xhr=null},</span>c.prototype.readImageFile=<span class="fstat-no" title="function not covered" >function(</span>b,c){var d,e;<span class="cstat-no" title="statement not covered" >if(a.isFunction(c))<span class="cstat-no" title="statement not covered" >return e=new Image,e.onload=<span class="fstat-no" title="function not covered" >function()</span>{<span class="cstat-no" title="statement not covered" >return c(e)},</span>e.onerror=<span class="fstat-no" title="function not covered" >function()</span>{<span class="cstat-no" title="statement not covered" >return c()},</span>window.FileReader&amp;&amp;FileReader.prototype.readAsDataURL&amp;&amp;/^image/.test(b.type)?(d=new FileReader,d.onload=<span class="fstat-no" title="function not covered" >function(</span>a){<span class="cstat-no" title="statement not covered" >return e.src=a.target.result},</span>d.readAsDataURL(b)):c()},</span></span>c.prototype.destroy=<span class="fstat-no" title="function not covered" >function()</span>{var b,c,d,e;<span class="cstat-no" title="statement not covered" >for(this.queue.length=0,e=this.files,c=0,d=e.length;d&gt;c;c++)<span class="cstat-no" title="statement not covered" >b=e[c],this.cancel(b);<span class="cstat-no" title="statement not covered" >r</span>eturn a(window).off(".uploader-"+this.id),a(document).off(".uploader-"+this.id)},</span>c.i18n={"zh-CN":{leaveConfirm:"正在上传文件，如果离开上传会自动取消"}},c.locale="zh-CN",c}(</span>b),d=<span class="fstat-no" title="function not covered" >function(</span>a){<span class="cstat-no" title="statement not covered" >return new c(a)}}</span>)</span>;</span></span></span></span></span></span></span></span></span></span></span></pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Wed Oct 31 2018 18:02:06 GMT+0800 (CST)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
<script src="../block-navigation.js"></script>
</body>
</html>
